<!DOCTYPE html>

<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ONLY HOME FOOD</title>
  <link rel="stylesheet" href="../../assets/css/edit profile.css">
  <link rel="stylesheet" href="../../assets/css/header.css">
  <link rel="stylesheet" href="../../assets/css/footer.css">
  <link rel="icon" href="../../assets/Images/LOGO.png" type="image/x-icon">
</head>

<body>
  <header class="header">
    <div class="shead">
      <a href="../../index.html"><img src="../../assets/Images/LOGO.png" alt="Logo" height="80px" width="100px"></a>
      <h1>ONLY HOME FOOD</h1>
      <a href="#" class="toggle-button">
        <span class="bar"></span>
        <span class="bar"></span>
        <span class="bar"></span>
      </a>
    </div>
    <div class="head">
      <nav class="navbar">
        <a class="navigation__link" href="../../index.html">Home</a>
        <a class="navigation__link" href="../Menu/menu.html">Menu</a>
        <a class="navigation__link" href="../Info/about us.html">About Us</a>
        <a class="navigation__link" href="../Info/contact us.html">Contact Us</a>
      </nav>
      <div class="Profile">
        <a href="./Login.html"><button>Login</button></a>
        <a href="../Cart/cart.html"><img src="../../assets/Images/cart-outline.svg" alt="Cart icon" height="30px"
            width="30px"></a>
        <a href="./Profile.html"><img src="../../assets/Images/person-circle-outline.svg" alt="Profile icon"
            height="30px" width="30px"></a>
      </div>
    </div>
  </header>

  <section>
    <div class="side">
      <div class="pro">
        <h1>Edit Profile</h1>
        <form onsubmit="update_details(event)">
          <div class="pbox">
            <div class="imgb">
              <img src="../../assets/Images/img.jpg" alt="profile image" height="250px" width="250px">
              <button>Add Photo</button>
              <button type="submit">Save</button>
            </div>
            <div>
              <div class="sep">
                <label for="name">Name</label>
                <input type="text" id="user_name" pattern="[a-zA-Z0-9]+" name="name" placeholder="Your Name">
              </div>
              <div class="sep">
                <label for="num">Mobile No</label>
                <input type="tel" id="user_phonenumber" pattern="[0-9].{9}" name="Mobile No" placeholder="Mobile No">
              </div>
              <div class="sep">
                <label for="email">Email</label>
                <input type="email" id="user_email" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$" readonly
                  name="Email" placeholder="Email">
              </div>
              <div class="sep">
                <label class="addr">Address</label>
                <textarea type="text" name="Address" id="user_address" placeholder="Your address"></textarea>
              </div>
            </div>
          </div>
        </form>
      </div>
      <div>
        <input type="file">
      </div>
    </div>
  </section>

  <footer>
    <div class="foot">
      <div class="footer">
        <img src="../../assets/Images/logo-facebook.svg" alt="facebook link">
        <img src="../../assets/Images/logo-instagram.svg" alt="instagram link">
        <img src="../../assets/Images/logo-twitter.svg" alt="twitter link">
        <img src="../../assets/Images/logo-whatsapp.svg" alt="whatsapp link">
      </div>
      <p>
        No.123, Rk Road, CLV Nagar, Uthandi, Chennai - 600 119.
      </p>
      <div class="phone">
        <div>
          <div>
            <img src="../../assets/Images/call-outline.svg" alt="call image" height="30px" width="30px">
          </div>
          <img src="../../assets/Images/person-circle-outline.svg" alt="mail image" height="30px" width="30px">
        </div>
        <div>
          <p>+918888888888</p>
          <p>ohfood@gmail.com</p>
        </div>
      </div>
    </div>
  </footer>

  <script>

      let userId = JSON.parse(localStorage.getItem('userId'));

      let user_list = JSON.parse(localStorage.getItem('user_list'));

      function login_data(e) {

        return e.user_phonenumber == userId;
      }

      let user_data = user_list.find(login_data);

      document.getElementById("user_name").value = user_data["user_name"];
      document.getElementById("user_phonenumber").value = user_data["user_phonenumber"];
      document.getElementById("user_email").value = user_data["user_email"];
      document.getElementById("user_address").value = user_data["user_address"]

      function update_details(e) {
        e.preventDefault();
        let edit_name = document.getElementById("user_name").value
        let edit_number = document.getElementById("user_phonenumber").value
        let edit_email = document.getElementById("user_email").value
        let edit_address = document.getElementById("user_address").value

        user_data["user_name"] = edit_name;   
        user_data["user_phonenumber"] = edit_number;
        user_data["user_email"] = edit_email;
        user_data["user_address"] = edit_address;

        localStorage.setItem('user_list', JSON.stringify(user_list));

        alert("Updated successfully");
        location.href = "./Profile.html";
      }

  </script>


</body>

</html>